{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 400,
  "height": 300,
  "data": {
    "url": "temps_2020_clean.csv",
    "format": { "type": "csv" }
  },
  "transform": [
    {
      "calculate": "if(datum.AvgTemp < 0, 'Below 0°C', if(datum.AvgTemp < 10, '0-10°C', if(datum.AvgTemp < 20, '10-20°C', if(datum.AvgTemp < 30, '20-30°C', 'Above 30°C'))))",
      "as": "TempRange"
    }
  ],
  "mark": { "type": "bar", "color": "#6c757d" },
  "encoding": {
    "x": {
      "field": "TempRange",
      "type": "nominal",
      "title": "Temperature Range",
      "sort": ["Below 0°C", "0-10°C", "10-20°C", "20-30°C", "Above 30°C"],
      "axis": {
        "labelAngle": 0
      }
    },
    "y": {
      "aggregate": "count",
      "type": "quantitative",
      "title": "Number of Countries"
    },
    "tooltip": [
      { "field": "TempRange", "type": "nominal", "title": "Temperature Range" },
      { "aggregate": "count", "type": "quantitative", "title": "Number of Countries" }
    ]
  }
}